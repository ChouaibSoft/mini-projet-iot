{"remainingRequest":"/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/node_modules/babel-loader/lib/index.js!/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/node_modules/eslint-loader/index.js??ref--13-0!/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/src/router/index.js","dependencies":[{"path":"/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/src/router/index.js","mtime":1555420565461},{"path":"/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport { store } from '../store/store';\nimport App from '../App';\nVue.use(Router);\nvar router = new Router({\n  mode: 'history',\n  routes: [{\n    path: '/',\n    name: 'home',\n    component: function component() {\n      return import(\"@/views/Home\");\n    }\n  }, {\n    path: '/auth',\n    name: 'auth',\n    component: function component() {\n      return import(\"@/views/Auth\");\n    },\n    meta: {\n      title: 'Authentication'\n    }\n  }, {\n    path: \"/dashboard\",\n    component: function component() {\n      return import(\"@/views/Dashboard\");\n    },\n    meta: {\n      protected: true,\n      title: 'Dashboard'\n    },\n    children: [{\n      path: \"channels/new\",\n      name: \"add-channel\",\n      meta: {\n        protected: true,\n        title: 'New Channel'\n      },\n      component: function component() {\n        return import(\"@/views/AddChannel\");\n      }\n    }, {\n      path: \"channels\",\n      name: \"my-channels\",\n      meta: {\n        protected: true,\n        title: 'My Channels'\n      },\n      component: function component() {\n        return import(\"@/views/MyChannels\");\n      }\n    }]\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  if (!to.meta.protected) {\n    //route is public, don't check for authentication\n    if (store.getters.getToken != null && to.path === '/auth') {\n      router.push('/dashboard');\n    } else {\n      next();\n    }\n  } else {\n    //route is protected, if authenticated, proceed. Else, login\n    if (store.getters.getToken != null) {\n      next();\n    } else {\n      router.push('/auth');\n    }\n  }\n});\nrouter.afterEach(function (to) {\n  Vue.nextTick(function () {\n    document.title = to.meta.title ? to.meta.title : 'Iot Platform ESI-SBA';\n  });\n});\nexport default router;",{"version":3,"sources":["/home/clokbani/DevWeb/Iot-Project/ayoub/iot-platform/src/router/index.js"],"names":["Vue","Router","store","App","use","router","mode","routes","path","name","component","meta","title","protected","children","beforeEach","to","from","next","getters","getToken","push","afterEach","nextTick","document"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,GAAP,MAAgB,QAAhB;AAEAH,GAAG,CAACI,GAAJ,CAAQH,MAAR;AAEA,IAAMI,MAAM,GAAG,IAAIJ,MAAJ,CAAW;AACtBK,EAAAA,IAAI,EAAE,SADgB;AAEtBC,EAAAA,MAAM,EAAE,CACJ;AACIC,IAAAA,IAAI,EAAE,GADV;AAEIC,IAAAA,IAAI,EAAE,MAFV;AAGIC,IAAAA,SAAS,EAAE;AAAA,aAAM,OAAO,cAAP,CAAN;AAAA;AAHf,GADI,EAMJ;AACIF,IAAAA,IAAI,EAAE,OADV;AAEIC,IAAAA,IAAI,EAAE,MAFV;AAGIC,IAAAA,SAAS,EAAE;AAAA,aAAM,OAAO,cAAP,CAAN;AAAA,KAHf;AAIIC,IAAAA,IAAI,EAAE;AACFC,MAAAA,KAAK,EAAE;AADL;AAJV,GANI,EAcJ;AACIJ,IAAAA,IAAI,EAAE,YADV;AAEIE,IAAAA,SAAS,EAAE;AAAA,aAAM,OAAO,mBAAP,CAAN;AAAA,KAFf;AAGIC,IAAAA,IAAI,EAAE;AACFE,MAAAA,SAAS,EAAE,IADT;AAEFD,MAAAA,KAAK,EAAE;AAFL,KAHV;AAOIE,IAAAA,QAAQ,EAAE,CACN;AACIN,MAAAA,IAAI,EAAE,cADV;AAEIC,MAAAA,IAAI,EAAE,aAFV;AAGIE,MAAAA,IAAI,EAAE;AACFE,QAAAA,SAAS,EAAE,IADT;AAEFD,QAAAA,KAAK,EAAE;AAFL,OAHV;AAOIF,MAAAA,SAAS,EAAE;AAAA,eAAM,OAAO,oBAAP,CAAN;AAAA;AAPf,KADM,EAUN;AACIF,MAAAA,IAAI,EAAE,UADV;AAEIC,MAAAA,IAAI,EAAE,aAFV;AAGIE,MAAAA,IAAI,EAAE;AACFE,QAAAA,SAAS,EAAE,IADT;AAEFD,QAAAA,KAAK,EAAE;AAFL,OAHV;AAOIF,MAAAA,SAAS,EAAE;AAAA,eAAM,OAAO,oBAAP,CAAN;AAAA;AAPf,KAVM;AAPd,GAdI;AAFc,CAAX,CAAf;AA8CAL,MAAM,CAACU,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAI,CAACF,EAAE,CAACL,IAAH,CAAQE,SAAb,EAAwB;AAAE;AACtB,QAAGX,KAAK,CAACiB,OAAN,CAAcC,QAAd,IAA0B,IAA1B,IAAkCJ,EAAE,CAACR,IAAH,KAAY,OAAjD,EAAyD;AACrDH,MAAAA,MAAM,CAACgB,IAAP,CAAY,YAAZ;AACH,KAFD,MAEK;AACDH,MAAAA,IAAI;AACP;AACJ,GAND,MAMO;AAAG;AACN,QAAGhB,KAAK,CAACiB,OAAN,CAAcC,QAAd,IAAyB,IAA5B,EAAiC;AAC7BF,MAAAA,IAAI;AACP,KAFD,MAEK;AACDb,MAAAA,MAAM,CAACgB,IAAP,CAAY,OAAZ;AACH;AACJ;AACJ,CAdD;AAeAhB,MAAM,CAACiB,SAAP,CAAiB,UAACN,EAAD,EAAQ;AACrBhB,EAAAA,GAAG,CAACuB,QAAJ,CAAc,YAAM;AAChBC,IAAAA,QAAQ,CAACZ,KAAT,GAAiBI,EAAE,CAACL,IAAH,CAAQC,KAAR,GAAgBI,EAAE,CAACL,IAAH,CAAQC,KAAxB,GAAgC,sBAAjD;AACH,GAFD;AAGH,CAJD;AAKA,eAAeP,MAAf","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport { store } from '../store/store'\nimport App from '../App'\n\nVue.use(Router);\n\nconst router = new Router({\n    mode: 'history',\n    routes: [\n        {\n            path: '/',\n            name: 'home',\n            component: () => import(\"@/views/Home\"),\n        },\n        {\n            path: '/auth',\n            name: 'auth',\n            component: () => import(\"@/views/Auth\"),\n            meta: {\n                title: 'Authentication'\n            },\n        },\n        {\n            path: \"/dashboard\",\n            component: () => import(\"@/views/Dashboard\"),\n            meta: {\n                protected: true,\n                title: 'Dashboard'\n            },\n            children: [\n                {\n                    path: \"channels/new\",\n                    name: \"add-channel\",\n                    meta: {\n                        protected: true,\n                        title: 'New Channel'\n                    },\n                    component: () => import(\"@/views/AddChannel\")\n                },\n                {\n                    path: \"channels\",\n                    name: \"my-channels\",\n                    meta: {\n                        protected: true,\n                        title: 'My Channels'\n                    },\n                    component: () => import(\"@/views/MyChannels\")\n                }\n            ]\n        }\n    ]\n})\nrouter.beforeEach((to, from, next) => {\n    if (!to.meta.protected) { //route is public, don't check for authentication\n        if(store.getters.getToken != null && to.path === '/auth'){\n            router.push('/dashboard');\n        }else{\n            next()\n        }\n    } else {  //route is protected, if authenticated, proceed. Else, login\n        if(store.getters.getToken!= null){\n            next()\n        }else{\n            router.push('/auth');\n        }\n    }\n});\nrouter.afterEach((to) => {\n    Vue.nextTick( () => {\n        document.title = to.meta.title ? to.meta.title : 'Iot Platform ESI-SBA';\n    });\n})\nexport default router;\n\n"]}]}