{"remainingRequest":"/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/babel-loader/lib/index.js!/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/src/views/AddTrigger.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/src/views/AddTrigger.vue","mtime":1562083515506},{"path":"/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _objectSpread from \"/home/clokbani/linux/DevWeb/Iot-Project/Front/iot-platform/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapActions } from 'vuex';\nimport { required, minLength } from 'vuelidate/lib/validators';\nimport Form from \"@/components/Form\";\nexport default {\n  name: \"new-trigger\",\n  components: {\n    'generic-form': Form\n  },\n  data: function data() {\n    return {\n      name: '',\n      id: '',\n      commandes: [{\n        name: 'Commande 1',\n        value: ''\n      }],\n      iduser: ''\n    };\n  },\n  computed: _objectSpread({}, mapState['userId']),\n  methods: _objectSpread({}, mapActions(['postRequest']), {\n    addTrigger: function addTrigger() {\n      var _this = this;\n\n      var postData = {\n        nom: this.name,\n        userId: this.$store.state.userId\n      };\n\n      for (var i = 1; i <= this.commandes.length; i++) {\n        var key = 'commande' + i,\n            value = this.commandes[i - 1].value;\n\n        if (value === '') {\n          break;\n        }\n\n        postData[key] = value;\n      }\n\n      var payload = {\n        'data': postData,\n        'link': '/trigger-service/trigger'\n      };\n      this.postRequest(payload).then(function () {\n        _this.flash(_this.$t('trigger.add-success'), 'success');\n\n        _this.$router.push('/dashboard/triggers');\n      }).catch(function () {\n        _this.flash(_this.$t('trigger.add-error'), 'error');\n      });\n    },\n    addCommande: function addCommande() {\n      var commande = \"Commande\" + (this.commandes.length + 1);\n      this.commandes.push({\n        name: commande,\n        value: ''\n      });\n    },\n    deleteCommande: function deleteCommande(index) {\n      this.commandes.splice(index, 1);\n    }\n  }),\n  mounted: function mounted() {\n    $('textarea#description').characterCounter();\n  },\n  validations: {\n    name: {\n      required: required,\n      minLength: minLength(3)\n    },\n    commandes: {\n      minLength: minLength(3)\n    }\n  }\n};",{"version":3,"sources":["AddTrigger.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA,SAAA,QAAA,EAAA,UAAA,QAAA,MAAA;AACA,SAAA,QAAA,EAAA,SAAA,QAAA,0BAAA;AACA,OAAA,IAAA,MAAA,mBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AACA,oBAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,EAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA,CACA;AACA,QAAA,IAAA,EAAA,YADA;AAEA,QAAA,KAAA,EAAA;AAFA,OADA,CAHA;AASA,MAAA,MAAA,EAAA;AATA,KAAA;AAWA,GAjBA;AAkBA,EAAA,QAAA,oBACA,QAAA,CAAA,QAAA,CADA,CAlBA;AAqBA,EAAA,OAAA,oBACA,UAAA,CAAA,CAAA,aAAA,CAAA,CADA;AAEA,IAAA,UAAA,EAAA,sBAAA;AAAA;;AACA,UAAA,QAAA,GAAA;AACA,QAAA,GAAA,EAAA,KAAA,IADA;AAEA,QAAA,MAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA;AAFA,OAAA;;AAIA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,IAAA,KAAA,SAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,GAAA,GAAA,aAAA,CAAA;AAAA,YACA,KAAA,GAAA,KAAA,SAAA,CAAA,CAAA,GAAA,CAAA,EAAA,KADA;;AAEA,YAAA,KAAA,KAAA,EAAA,EAAA;AACA;AACA;;AACA,QAAA,QAAA,CAAA,GAAA,CAAA,GAAA,KAAA;AACA;;AACA,UAAA,OAAA,GAAA;AACA,gBAAA,QADA;AAEA,gBAAA;AAFA,OAAA;AAIA,WAAA,WAAA,CAAA,OAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,SAAA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,qBAAA;AACA,OAHA,EAGA,KAHA,CAGA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,OAAA;AACA,OALA;AAMA,KAzBA;AA0BA,IAAA,WAAA,EAAA,uBAAA;AACA,UAAA,QAAA,GAAA,cAAA,KAAA,SAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,WAAA,SAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA;AAIA,KAhCA;AAiCA,IAAA,cAAA,EAAA,wBAAA,KAAA,EAAA;AACA,WAAA,SAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA;AAnCA,IArBA;AA0DA,EAAA,OA1DA,qBA0DA;AACA,IAAA,CAAA,CAAA,sBAAA,CAAA,CAAA,gBAAA;AAEA,GA7DA;AA8DA,EAAA,WAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,QAAA,EAAA,QADA;AAEA,MAAA,SAAA,EAAA,SAAA,CAAA,CAAA;AAFA,KADA;AAKA,IAAA,SAAA,EAAA;AACA,MAAA,SAAA,EAAA,SAAA,CAAA,CAAA;AADA;AALA;AA9DA,CAAA","sourcesContent":["<template>\n    <div id=\"content\">\n        <div class=\"row page-title-path\">\n            <div class=\"col\">\n                <h2>{{ $t('main-title') }}</h2>\n            </div>\n            <div class=\"col right\">\n                <p>Home > <span> Ajouter Trigger</span></p>\n            </div>\n\n        </div>\n        <section class=\"component-section\">\n            <div class=\"row\">\n                <div class=\"col s12 l5\">\n                    <form class=\"form\" id=\"add-canal\" @submit.prevent=\"addTrigger\">\n                        <generic-form>\n                            <div slot=\"form-fields\">\n                                <div class=\"row\">\n                                    <div class=\"input-field col s12\">\n                                        <input\n                                                id=\"name\"\n                                                type=\"text\"\n                                                required\n                                                minlength=\"3\"\n                                                class=\"validate\"\n                                                v-model=\"name\"\n                                                @input=\"$v.name.$touch()\">\n                                        <label for=\"name\">{{ $t('trigger.name') }}</label>\n                                        <div v-if=\"$v.name.$dirty\">\n                                            <p class=\"error-message red-text \" v-if=\"!$v.name.required\">\n                                                {{ $t('errors.required') }}\n                                            </p>\n                                            <p class=\"error-message red-text \" v-if=\"!$v.name.minLength\">\n                                                {{ $t('errors.min-length', {minLength: 3}) }}\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"row\" v-for=\"(cmd, index) in commandes\" :key=\"cmd\">\n                                    <div class=\"input-field col s12\">\n                                        <input\n                                                v-bind:id=\"cmd.name\"\n                                                type=\"text\"\n                                                class=\"validate\"\n                                                minlength=\"3\"\n                                                required\n                                                v-model=\"commandes[index].value\">\n                                        <label  v-bind:for=\"cmd.name\" >\n                                            {{ $t('trigger.commandX', {num: index + 1}) }}\n                                        </label>\n                                        <i @click=\"deleteCommande(index)\" v-if=\"index > 0\" class=\"fa fa-times delete-field red-text text-darken-5\"></i>\n                                    </div>\n                                </div>\n                            </div>\n                            <div slot=\"form-controls\">\n                                <div>\n                                    <div class=\"row\">\n                                        <div class=\"col\">\n                                            <div v-if=\"commandes.length < 8\" @click=\"addCommande\" class=\"btn waves-effect waves-light submit\">\n                                                <i style=\"font-size: .9rem\" class=\"fa fa-plus\"></i> {{ $t('trigger.commandX', {num: ''}) }}\n                                            </div>\n                                        </div>\n                                        <div class=\"col right\">\n                                            <button type=\"submit\" class=\"button waves-effect waves-light btn\">\n                                                {{ $t('trigger.add') }}\n                                                <i class=\"material-icons right\">send</i>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </generic-form>\n                    </form>\n                </div>\n                <div class=\"col l7 s12\">\n                    <h4>{{ $t('help') }}</h4>\n                    <p>{{ $t('trigger-des') }}</p>\n                    <h5>{{ $t('trigger-settings') }}</h5>\n                    <ul class=\"help-list\">\n                        <li>\n                            <p><strong>{{ $t('settings.name') }}</strong>{{ $t('settings.name-det') }}</p>\n                        </li>\n                        <li>\n                            <p v-html=\"this.$t('settings.command-det')\"></p>\n                        </li>\n                    </ul>\n\n                </div>\n            </div>\n        </section>\n    </div>\n</template>\n\n<script>\n    import { mapState, mapActions } from 'vuex';\n    import { required, minLength } from 'vuelidate/lib/validators'\n    import Form from \"@/components/Form\";\n    export default {\n        name: \"new-trigger\",\n        components: {\n            'generic-form': Form\n        },\n        data (){\n            return{\n                name: '',\n                id: '',\n                commandes: [\n                    {\n                        name: 'Commande 1',\n                        value: ''\n                    },\n                ],\n                iduser:'',\n            }\n        },\n        computed:{\n            ...mapState['userId']\n        },\n        methods: {\n            ...mapActions(['postRequest']),\n            addTrigger: function () {\n                var postData = {\n                    nom: this.name,\n                    userId: this.$store.state.userId\n                };\n                for(var i = 1; i <= this.commandes.length; i++){\n                    var key = 'commande' + i,\n                        value = this.commandes[i-1].value;\n                    if (value === '') {\n                        break;\n                    }\n                    postData[key] = value;\n                }\n                var payload = {\n                    'data': postData,\n                    'link': '/trigger-service/trigger'\n                };\n                this.postRequest(payload).then(() => {\n                    this.flash(this.$t('trigger.add-success'), 'success');\n                    this.$router.push('/dashboard/triggers');\n                }).catch(() => {\n                    this.flash(this.$t('trigger.add-error'), 'error');\n                })\n            },\n            addCommande: function () {\n                var commande = \"Commande\" + (this.commandes.length + 1);\n                this.commandes.push({\n                    name: commande,\n                    value: ''\n                });\n            },\n            deleteCommande: function (index) {\n                this.commandes.splice(index, 1);\n            }\n        },\n        mounted(){\n            $('textarea#description').characterCounter();\n\n        },\n        validations: {\n            name: {\n                required,\n                minLength: minLength(3)\n            },\n            commandes: {\n                minLength: minLength(3)\n            }\n        },\n    }\n</script>\n\n<style scoped lang=\"scss\">\n</style>\n<i18n>\n    {\n    \"en\": {\n    \"main-title\": \"New Trigger\",\n    \"trigger-des\": \"Use the TalkBack app to send new commands to any device.\",\n    \"trigger-settings\": \"Trigger Settings\",\n    \"settings\": {\n    \"name\": \"Trigger Name : \",\n    \"name-det\": \"Enter a unique name for your Trigger.\",\n    \"command\": \"Commands\",\n    \"command-det\": \"<strong>Commands : </strong> Click  <strong>+ command </strong> to queue new commands to your TalkBack. You can also queue up commands using the Trigger API.\"\n    }\n\n    },\n    \"fr\": {\n    \"main-title\": \"Nouveau Trigger\",\n    \"trigger-settings\": \"Param√®tres de Trigger\",\n    \"settings\": {\n    \"name\": \"Nom du Trigger : \",\n    \"name-det\": \"Entrez un nom unique pour votre triggers.\",\n    \"command\": \"Commandes\",\n    \"command-det\": \"<strong>Commandes : </strong> Cliquez sur  <strong>+ commande </strong> pour ajouter une nouvelle commande pour votre trigger\"\n    }\n    }\n    }\n</i18n>\n"],"sourceRoot":"src/views"}]}